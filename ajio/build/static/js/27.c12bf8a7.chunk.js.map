{"version":3,"file":"static/js/27.c12bf8a7.chunk.js","mappings":"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","sources":["redux/apis/mobileLoginApi.js","redux/actions/mobileLoginAction.js","components/OtpComponent.js"],"sourcesContent":["import API from \"../../API/API\";\r\nconst api = new API();\r\nconst endPoints = \"sent-otp\";\r\nexport const mobileLoginApi = async (phoneNumber,providerId,uId) => {\r\n  return new Promise(async (resolve, reject) => {\r\n    try {\r\n    \r\n      const response = await api.post(`${endPoints}`,{phoneNumber,providerId,uId});\r\n    \r\n      resolve(response);\r\n   \r\n    } catch (error) {\r\n      console.error(\"Error in mobileLoginApi:\", error);\r\n      reject(error);\r\n    }\r\n  });\r\n};\r\n","import * as types from './actionTypes'\r\nimport { mobileLoginApi } from '../apis/mobileLoginApi';\r\n\r\nexport const mobileLoginStart= () => ({\r\ntype:types.MOBILE_LOGIN_START\r\n})\r\n\r\nexport const mobileLoginSuccess = (data) => (\r\n    {\r\n    type:types.MOBILE_LOGIN_SUCCESS,\r\n    payload:data\r\n}\r\n\r\n)\r\n\r\nexport const resetMobileData = () => ({\r\n  type: types.RESET_MOBILE_DATA\r\n});\r\n\r\nexport const mobileLoginError = (error) => (\r\n    {\r\n    type:types.MOBILE_LOGIN_ERROR,\r\n    payload:error\r\n})\r\n\r\nexport const mobileLoginInitiate = (phoneNumber,providerId,uId) => {\r\n    return async (dispatch)=>{\r\n        dispatch(mobileLoginStart())\r\n        try {\r\n          const mobileLogindata = await mobileLoginApi(phoneNumber,providerId,uId)\r\n          console.log(\"mobileLogindata\",mobileLogindata)\r\n          dispatch(mobileLoginSuccess(mobileLogindata))\r\n  \r\n        } catch (err) {\r\n          console.log(\"error\",err)\r\n          dispatch(mobileLoginError(err))\r\n  \r\n        }\r\n    }\r\n}","import React, { useState } from \"react\";\r\nimport { Modal, Grid, Typography, TextField, Button } from \"@mui/material\"; \r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { mobileLoginInitiate } from \"../redux/actions/mobileLoginAction\";\r\nimport { getToken } from \"./GlobalFunction\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst style = {\r\n    position: \"absolute\",\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    transform: \"translate(-50%, -50%)\",\r\n    width: \"100%\",\r\n    maxWidth: { md: \"800px\", lg: \"380px\", xxl: \"1200px\" },\r\n    height: \"auto\",\r\n    maxHeight: \"90vh\",\r\n    bgcolor: \"background.paper\",\r\n    border: \"2px solid lightgray\",\r\n    boxShadow: 24,\r\n    p: 4,\r\n    overflowY: \"auto\",\r\n};\r\n\r\nconst OtpComponent = ({ setModalOpen, modalOpen, phoneNumber,setOpen }) => {\r\n    const [otp, setOtp] = useState(Array(6).fill(\"\")); \r\n    const dispatch = useDispatch()\r\n    const token = getToken()\r\n   \r\n\r\n    const handleChange = (value, index) => {\r\n        const newOtp = [...otp];\r\n        newOtp[index] = value.slice(0, 1); \r\n        setOtp(newOtp);\r\n\r\n       \r\n        if (value && index < otp.length - 1) {\r\n            const nextField = document.getElementById(`otp-${index + 1}`);\r\n            if (nextField) nextField.focus();\r\n        }\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setModalOpen(false);\r\n    };\r\n\r\n    const handleVerifyOtp = async () => {\r\n        const otpCode = otp.join(\"\");\r\n        if (!otpCode || otpCode.length < otp.length) {\r\n            alert(\"Please enter the complete OTP\");\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const user = await verifyOTP(otpCode);\r\n            toast.success(`Phone number verified! Welcome ${user.phoneNumber}`); \r\n            setModalOpen(false)\r\n            setOpen(false) \r\n        } catch (error) {\r\n            console.error(\"Error verifying OTP:\", error);\r\n            alert(\"An error occurred. Please try again later.\");\r\n        }\r\n    };\r\n\r\n    const verifyOTP = async (otp) => {\r\n        try {\r\n          const confirmationResult = window.confirmationResult;\r\n          const result = await confirmationResult.confirm(otp);\r\n          const user = result.user;\r\n          console.log(\"User signed in successfully:\", user);\r\n          const phoneNumber = user.phoneNumber\r\n          const providerId = user.providerId   \r\n          const uId = user.providerData[0].uid \r\n          console.log(\"uId\",uId)  \r\n          if(!token){     \r\n          await  dispatch(mobileLoginInitiate(phoneNumber,providerId,uId))\r\n          }\r\n          return user;\r\n        } catch (error) {\r\n          console.error(\"Error verifying OTP:\", error);\r\n          throw error;\r\n        }\r\n      };\r\n      \r\n\r\n    return (\r\n        <Modal\r\n            open={modalOpen}\r\n            onClose={handleClose}\r\n            sx={{\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                justifyContent: \"center\",\r\n            }}\r\n        >\r\n            <Grid container sx={style}>\r\n                <Grid item xs={12}>\r\n                    <Typography variant=\"body1\" gutterBottom>\r\n                        Enter the OTP sent to  {phoneNumber}\r\n                    </Typography>\r\n                </Grid>\r\n                <Grid\r\n                    item\r\n                    xs={12}\r\n                    style={{ display: \"flex\", justifyContent: \"center\", gap: \"10px\" }}\r\n                    my={5}\r\n                >\r\n                    {otp.map((digit, index) => (\r\n                        <TextField\r\n                            key={index}\r\n                            id={`otp-${index}`}\r\n                            variant=\"outlined\"\r\n                            value={digit}\r\n                            onChange={(e) => handleChange(e.target.value, index)}\r\n                            inputProps={{\r\n                                maxLength: 1,\r\n                                style: { textAlign: \"center\", fontSize: \"18px\" },\r\n                            }}\r\n                            style={{ width: \"40px\" }}\r\n                        />\r\n                    ))}\r\n                </Grid>\r\n                <Grid item xs={12}>\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        fullWidth\r\n                        onClick={handleVerifyOtp}\r\n                        sx={{ backgroundColor: \"#866528\", color: \"white\" }}\r\n                    >\r\n                        Start Shopping\r\n                    </Button>\r\n                </Grid>\r\n            </Grid>\r\n        </Modal>\r\n    );\r\n};\r\n\r\nexport default OtpComponent;\r\n"],"names":["api","API","mobileLoginInitiate","phoneNumber","providerId","uId","async","dispatch","type","types","mobileLogindata","Promise","resolve","reject","post","concat","error","console","mobileLoginApi","log","data","payload","err","style","position","top","left","transform","width","maxWidth","md","lg","xxl","height","maxHeight","bgcolor","border","boxShadow","p","overflowY","_ref","setModalOpen","modalOpen","setOpen","otp","setOtp","useState","Array","fill","useDispatch","token","getToken","verifyOTP","confirmationResult","window","user","confirm","providerData","uid","_jsx","Modal","open","onClose","handleClose","sx","display","alignItems","justifyContent","children","_jsxs","Grid","container","item","xs","Typography","variant","gutterBottom","gap","my","map","digit","index","TextField","id","value","onChange","e","handleChange","newOtp","slice","length","nextField","document","getElementById","focus","target","inputProps","maxLength","textAlign","fontSize","Button","fullWidth","onClick","otpCode","join","alert","toast","success","backgroundColor","color"],"sourceRoot":""}